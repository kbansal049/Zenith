<apex:page showHeader="true" sidebar="false" controller="PerformanceController"  extensions="PerformanceStatService" tabStyle="Performance__tab">

        <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular-animate.min.js"></script>
        <apex:stylesheet value="{!URLFOR($Resource.Performance, 'css/fq.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.Performance, 'css/toggle-switch.css')}" /> 
        <link href="https://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" />
        
        <script type="text/javascript">
            var forecastEnabled = {!CurrentViewingUser.ForecastEnabled == true};
            var currentViewingUserId = "{!CurrentViewingUser.UserId}";
            var userPath = "{!UserPath}";
            var forecastType = "{!ForecastType}";
            var dashboardType = "{!dashBoardType}";
            var firstQuarter = "{!firstQtr}"
            var currentQuarter = "{!currentQtr}"
            var fiscalQtr = "{!CurrentFiscalQuarter.FormattedString}";
            
        </script>
        <script src="{!URLFOR($Resource.Performance, 'js/performance.js')}"></script> 
        <apex:form >
            
            <div id="ngContainer" ng-app="dashboardApp" ng-controller="dashboardCtrl">
                <!--<div id="wrap">
                    <div class="fqTitleCon">
                        <div style="width:450px" class="switch-toggle switch-4 switch-candy switch-candy-blue fqSwitch">
                          <input id="funnel" name="dashboard" type="radio" ng-checked="dashboardType=='funnel'" />
                          <label for="funnel" ng-click="dashboardType='funnel'; loadAll();">Funnel</label>

                          <input id="performance" name="dashboard" type="radio" ng-checked="dashboardType=='performance'" />
                          <label for="performance" ng-click="dashboardType='performance'; loadAll();">Performance</label>
                          <input id="activity" name="dashboard" type="radio" ng-checked="dashboardType=='activity'" />
                          <label for="activity" ng-click="dashboardType='activity'; loadAll();">Activity</label>
                          <input id="stack" name="dashboard" type="radio" ng-checked="dashboardType=='stack'" />
                          <label for="stack" ng-click="dashboardType='stack'; loadAll();">Stack</label>
                          <a></a>
                          
                          
                     </div>
                     <br/>
                     
                    
                     
                        
                        <span class="displayUnits">
                            <input type="radio" name="displayUnits" value="M" ng-click="displayFormat='M'" />Millions
                            <input type="radio" name="displayUnits" value="K" ng-click="displayFormat='K'" />Thousands
                            <input type="radio" name="displayUnits" value="W" checked="true" ng-click="displayFormat='W'" />Whole
                            <input type="radio" name="displayUnits" value="E" ng-click="displayFormat='E'" />Exact
                        </span>
                        
                    </div>
                </div>
                <br/>
                -->
                <span>
                 <div id="wrap2">
                    <div class="fqTitleCon">
                     
                     <div class="switch-toggle switch-4 switch-candy switch-candy-blue fqSwitch" style="width:310px">
                          
                          
                          <input id="forecastAll" name="view" type="radio" ng-checked="forecastType=='all'" />
                          <label for="forecastAll" ng-click="forecastType='all';loadAll();" >All</label>
                          <input id="forecastNew" name="view" type="radio" ng-checked="forecastType=='new'" />
                          <label for="forecastNew" ng-click="forecastType='new';loadAll();">New</label>
                          <input id="forecastUpsell" name="view" type="radio" ng-checked="forecastType=='upsell'" />
                          <label for="forecastUpsell" ng-click="forecastType='upsell';loadAll();">Upsell</label>
                          <input id="forecastRenewal" name="view" type="radio" ng-checked="forecastType=='renewal'"/>
                          <label for="forecastRenewal" ng-click="forecastType='renewal';loadAll();">Renewal</label>
                          <a></a>
                        </div>
                        <span class="displayUnits">
                            <input type="radio" name="displayUnits" value="M" ng-click="displayFormat='M'" />Millions
                            <input type="radio" name="displayUnits" value="K" ng-click="displayFormat='K'" />Thousands
                            <input type="radio" name="displayUnits" value="W" checked="true" ng-click="displayFormat='W'" />Whole
                            <input type="radio" name="displayUnits" value="E" ng-click="displayFormat='E'" />Exact
                        </span>
                        
                        <!--
                        <span class="displayUnits">
                            <input type="radio" name="displayUnits" value="M" ng-click="displayFormat='M'" />Millions
                            <input type="radio" name="displayUnits" value="K" ng-click="displayFormat='K'" />Thousands
                            <input type="radio" name="displayUnits" value="W" checked="true" ng-click="displayFormat='W'" />Whole
                            <input type="radio" name="displayUnits" value="E" ng-click="displayFormat='E'" />Exact
                        </span>
                        -->
                    </div>
                </div>
                
                </span>
                
                
                <label style="display: block;text-align: right;line-height: 15px;font-size: 15px;">
                        <span style="color:red; background: white;text-align: center;">&nbsp; Beta Release &nbsp;</span>
                </label><br/><br/>
                    
                
                <div class="ptBreadcrumb"><span class="fa fa-user"></span>
                    <apex:variable var="p" value="" />
                    <apex:repeat value="{!UserNavPath}" var="usr">
                        <apex:variable var="p" value="{!p + '/' + usr.UserId}" />
                        <a href="{!$Page.PerformanceDashboard}?path={!p}&type={{forecastType}}">{!usr.UserName}</a> &gt;
                    </apex:repeat>
                    <span style="margin-left:30%;color:red;" ng-show="requestInProgress>0">Loading...</span>
                    <span style="color:red;" ng-show="errorMessage != null"></span>
                </div>
                <br/>
                <apex:pageBlock id="teamListingBlock"  html-ng-show="teamForecasts.data.length > 0;dashboardType=='funnel'"  title="4 Quarter Rolling Pipeline Coverage" helpTitle="Help" helpUrl="/servlet/servlet.ImageServer?id=0158A00000090rv&oid=00D8A0000008lXx&lastMod=1451374791000" >
                    <table class="report">
                        <thead>
                            <tr class="header">
                                <th class="minW80" style="color: white;background-color: white;">&nbsp;</th>
                                <th class="minW80" colspan="3" style="color: white;background-color: #0C0C61;">{!firstQtr}</th>
                                <th class="minW80" colspan="3" style="color: white;background-color: #7A7A7F;">{!secondQtr}</th>
                                <th class="minW80" colspan="3" style="color: white;background-color: #0C0C61;">{!thirdQtr}</th>
                                <th class="minW80" colspan="3" style="color: white;background-color: #7A7A7F;">{!fourthQtr}</th>
                                <th class="minW80" colspan="3" style="background-color: black; color: white">Total</th>
                             </tr>
                             
                            <tr class="header">
                                <th class="minW80" style="background-color: black; color: white">Team</th>
                                
                                <th class="minW80">Pipe Line</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">Coverage</th>
                                
                                <th class="minW80" style="background-color: #DEDBDB;">Pipe Line</th>
                                <th class="minW80" style="background-color: #DEDBDB;">Quota</th>
                                <th class="minW80" style="background-color: #DEDBDB;">Coverage</th>
                                
                                <th class="minW80">Pipe Line</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">Coverage</th>
                                
                                <th class="minW80" style="background-color: #DEDBDB;">Pipe Line</th>
                                <th class="minW80" style="background-color: #DEDBDB;">Quota</th>
                                <th class="minW80" style="background-color: #DEDBDB;">Coverage</th>
                                
                                <th class="minW80">Pipe Line</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">Coverage</th>
                                
                             </tr> 
                        </thead>
                        <tbody>
                        <br/>
                             <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" ng-repeat="forecast in teamForecasts.data">
                                <td ng-show="forecast.UserId != currentUser"><a href="{!$Page.PerformanceDashboard}?path={!UserPath}/{{forecast.UserId}}&type={{dasboardType}}">{{forecast.UserName}}</a></td>
                                
                                <td class="number" ng-show="forecast.UserId != currentUser">
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!firstQtr}&UsrId={{forecast.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(forecast.firstQtrPipeline, displayFormat)}}</a> 
                                </td>
                                <td class="number" ng-show="forecast.UserId != currentUser">{{formatDecimal(forecast.firstQtrQuota, displayFormat)}}</td>
                                <td class="number" ng-show="forecast.UserId != currentUser" style="text-align: center;">{{formatCoverage(forecast.firstQtrCoverage >0 ? forecast.firstQtrCoverage : 'NA') }}</td>
                                
                                <td class="number" ng-show="forecast.UserId != currentUser">
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!secondQtr}&UsrId={{forecast.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(forecast.secondQtrPipeline, displayFormat) }}</a> 
                                </td>
                                <td class="number" ng-show="forecast.UserId != currentUser">{{formatDecimal(forecast.secondQtrQuota, displayFormat) }}</td>
                                <td class="number" ng-show="forecast.UserId != currentUser" style="text-align: center;">{{formatCoverage(forecast.secondQtrCoverage > 0 ? forecast.secondQtrCoverage : 'NA')}}</td>
                                
                                
                                <td class="number" ng-show="forecast.UserId != currentUser">
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!thirdQtr}&UsrId={{forecast.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(forecast.thirdQtrPipeline, displayFormat) }}</a> 
                                </td>
                                <td class="number" ng-show="forecast.UserId != currentUser">{{formatDecimal(forecast.thirdQtrQuota, displayFormat) }}</td>
                                <td class="number" ng-show="forecast.UserId != currentUser" style="text-align: center;">{{formatCoverage(forecast.thirdQtrCoverage >0 ? forecast.thirdQtrCoverage : 'NA')}}</td>
                                
                                <td class="number" ng-show="forecast.UserId != currentUser">
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!fourthQtr}&UsrId={{forecast.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(forecast.fourthQtrPipeline, displayFormat)}}</a> 
                                </td>
                                <td class="number" ng-show="forecast.UserId != currentUser">{{formatDecimal(forecast.fourthQtrQuota, displayFormat) }}</td>
                                <td class="number" ng-show="forecast.UserId != currentUser" style="text-align: center;">{{formatCoverage(forecast.fourthQtrCoverage >0 ? forecast.fourthQtrCoverage : 'NA')}}</td>
                                
                                <td class="number" ng-show="forecast.UserId != currentUser">
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!firstQtr};{!secondQtr};{!thirdQtr};{!fourthQtr}&UsrId={{forecast.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(forecast.firstQtrPipeline + forecast.secondQtrPipeline + forecast.thirdQtrPipeline + forecast.fourthQtrPipeline, displayFormat) }}</a>
                                
                                </td>
                                <td class="number" ng-show="forecast.UserId != currentUser">{{formatDecimal(forecast.firstQtrQuota + forecast.secondQtrQuota + forecast.thirdQtrQuota + forecast.fourthQtrQuota, displayFormat) }}</td>
                                
                                <td class="number" ng-show="forecast.UserId != currentUser" style="text-align: center;">{{formatCoverage((forecast.firstQtrPipeline + forecast.secondQtrPipeline + forecast.thirdQtrPipeline + forecast.fourthQtrPipeline) > 0 ?  (forecast.firstQtrPipeline + forecast.secondQtrPipeline + forecast.thirdQtrPipeline + forecast.fourthQtrPipeline)/(forecast.firstQtrQuota + forecast.secondQtrQuota + forecast.thirdQtrQuota + forecast.fourthQtrQuota) : 'NA')}}</td>
                                
                                
                                
                             </tr>
                             
                             <tr  ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }">
                                <td ><b>{{teamForecasts.total.UserName}}</b></td>
                                    
                                <td class="number"><b>
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!firstQtr}&UsrId={{teamForecasts.total.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(teamForecasts.total.firstQtrPipeline, displayFormat)}}</a> 
                                </b></td>
                                <td class="number"><b>{{formatDecimal(teamForecasts.total.firstQtrQuota, displayFormat)}}</b></td>
                                <td class="number" style="text-align: center;"><b>{{formatCoverage(teamForecasts.total.firstQtrCoverage >0 ? teamForecasts.total.firstQtrCoverage : 'NA') }}</b></td>
                                
                                <td class="number"><b>
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!secondQtr}&UsrId={{teamForecasts.total.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(teamForecasts.total.secondQtrPipeline, displayFormat) }}</a> 
                                </b></td>
                                <td class="number"><b>{{formatDecimal(teamForecasts.total.secondQtrQuota, displayFormat) }}</b></td>
                                <td class="number" style="text-align: center;"><b>{{formatCoverage(teamForecasts.total.secondQtrCoverage > 0 ? teamForecasts.total.secondQtrCoverage : 'NA')}}</b></td>
                                
                                
                                <td class="number"><b>
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!thirdQtr}&UsrId={{teamForecasts.total.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(teamForecasts.total.thirdQtrPipeline, displayFormat) }}</a>
                                </b></td>
                                <td class="number"><b>{{formatDecimal(teamForecasts.total.thirdQtrQuota, displayFormat) }}</b></td>
                                <td class="number" style="text-align: center;"><b>{{formatCoverage(teamForecasts.total.thirdQtrCoverage >0 ? teamForecasts.total.thirdQtrCoverage : 'NA')}}</b></td>
                                
                                <td class="number"><b>
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!fourthQtr}&UsrId={{teamForecasts.total.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(teamForecasts.total.fourthQtrPipeline, displayFormat) }}</a>
                                </b></td>
                                <td class="number"><b>{{formatDecimal(teamForecasts.total.fourthQtrQuota, displayFormat) }}</b></td>
                                <td class="number" style="text-align: center;"><b>{{formatCoverage(teamForecasts.total.fourthQtrCoverage >0 ? teamForecasts.total.fourthQtrCoverage : 'NA')}}</b></td>
                                
                                <td class="number" ><b>
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!firstQtr};{!secondQtr};{!thirdQtr};{!fourthQtr}&UsrId={{teamForecasts.total.UserId}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(teamForecasts.total.firstQtrPipeline + teamForecasts.total.secondQtrPipeline + teamForecasts.total.thirdQtrPipeline + teamForecasts.total.fourthQtrPipeline, displayFormat) }}</a>
                                
                                </b></td>
                                <td class="number" ><b>{{formatDecimal(teamForecasts.total.firstQtrQuota + teamForecasts.total.secondQtrQuota + teamForecasts.total.thirdQtrQuota + teamForecasts.total.fourthQtrQuota, displayFormat) }}</b></td>
                                <td class="number" style="text-align: center;"><b>{{formatCoverage((teamForecasts.total.firstQtrPipeline + teamForecasts.total.secondQtrPipeline + teamForecasts.total.thirdQtrPipeline + teamForecasts.total.fourthQtrPipeline) > 0 ?  (teamForecasts.total.firstQtrPipeline + teamForecasts.total.secondQtrPipeline + teamForecasts.total.thirdQtrPipeline + teamForecasts.total.fourthQtrPipeline)/(teamForecasts.total.firstQtrQuota + teamForecasts.total.secondQtrQuota + teamForecasts.total.thirdQtrQuota + teamForecasts.total.fourthQtrQuota) : 'NA')}}</b></td>
                                
                               
                            </tr>
                             
                         </tbody>
                         
                    </table>
                    <br/>
                    <br/>
                     <table class="report">
                        <thead>
                            <tr class="header">
                                <th class="minW80" style="color: white;background-color: white;">&nbsp;</th>
                                <th class="minW80" colspan="3" style="color: white;background-color: #0C0C61;">{!firstQtr}</th>
                                <th class="minW80" colspan="3" style="color: white;background-color: #7A7A7F;">{!secondQtr}</th>
                                <th class="minW80" colspan="3" style="color: white;background-color: #0C0C61;">{!thirdQtr}</th>
                                <th class="minW80" colspan="3" style="color: white;background-color: #7A7A7F;">{!fourthQtr}</th>
                                <th class="minW80" colspan="3" style="background-color: black; color: white">Total</th>
                             </tr>
                             
                            <tr class="header">
                                <th class="minW80" style="color: white;background-color: #37601C;">Source</th>
                                
                                <th class="minW80">Pipe Line</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">Coverage</th>
                                
                                <th class="minW80" style="background-color: #DEDBDB;">Pipe Line</th>
                                <th class="minW80" style="background-color: #DEDBDB;">Quota</th>
                                <th class="minW80" style="background-color: #DEDBDB;">Coverage</th>
                                
                                <th class="minW80">Pipe Line</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">Coverage</th>
                                
                                <th class="minW80" style="background-color: #DEDBDB;">Pipe Line</th>
                                <th class="minW80" style="background-color: #DEDBDB;">Quota</th>
                                <th class="minW80" style="background-color: #DEDBDB;">Coverage</th>
                                
                                <th class="minW80">Pipe Line</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">Coverage</th>
                                
                             </tr> 
                        </thead>
                        <tbody>
                        <br/>
                        
                             <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" ng-repeat="src in sourceSummary.data">
                                <td style="color: black;background-color: #A8DC85;">{{src.Source}}</td>
                                
                                <td class="number" >
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!firstQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source={{src.Source}}" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(src.firstQtrPipeline, displayFormat)}}</a> 
                                </td>
                                <td class="number" >{{formatDecimal(src.firstQtrQuota, displayFormat)}}</td>
                                <td class="number"  style="text-align: center;">{{formatCoverage(src.firstQtrCoverage >0 ? src.firstQtrCoverage : 'NA') }}</td>
                                
                                <td class="number" >
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!secondQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source={{src.Source}}" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(src.secondQtrPipeline, displayFormat)}}</a> 
                                </td>
                                <td class="number" >{{formatDecimal(src.secondQtrQuota, displayFormat) }}</td>
                                <td class="number"  style="text-align: center;">{{formatCoverage(src.secondQtrCoverage > 0 ? src.secondQtrCoverage : 'NA')}}</td>
                                
                                
                                <td class="number" >
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!thirdQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source={{src.Source}}" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(src.thirdQtrPipeline, displayFormat) }}</a> 
                                </td>
                                <td class="number" >{{formatDecimal(src.thirdQtrQuota, displayFormat) }}</td>
                                <td class="number"  style="text-align: center;">{{formatCoverage(src.thirdQtrCoverage >0 ? src.thirdQtrCoverage : 'NA')}}</td>
                                
                                <td class="number" >
                                    <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!fourthQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source={{src.Source}}" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(src.fourthQtrPipeline, displayFormat)}}</a> 
                                </td>
                                <td class="number" >{{formatDecimal(src.fourthQtrQuota, displayFormat) }}</td>
                                <td class="number"  style="text-align: center;">{{formatCoverage(src.fourthQtrCoverage >0 ? src.fourthQtrCoverage : 'NA')}}</td>
                                
                                <td class="number" >
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!firstQtr};{!secondQtr};{!thirdQtr};{!fourthQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source={{src.Source}}" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(src.totalQtrPipeline, displayFormat) }}</a> 
                                </td>
                                <td class="number" >{{formatDecimal(src.totalQtrQuota, displayFormat) }}</td>
                                
                                <td class="number"  style="text-align: center;">{{formatCoverage(src.totalQtrCoverage  >0 ? src.totalQtrCoverage : 'NA')}}</td>
                                
                             </tr>
                             
                             <tr class="footer" style="background-color:black;">
                                <td >Total</td>
                                
                                <td class="number" >
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!firstQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: white">{{formatDecimal(sourceSummary.total.firstQtrPipeline, displayFormat)}}</a> 
                                </td>
                                <td class="number" >{{formatDecimal(sourceSummary.total.firstQtrQuota, displayFormat)}}</td>
                                <td class="number"  style="text-align: center;">{{formatCoverage( sourceSummary.total.firstQtrPipeline > 0 ?  sourceSummary.total.firstQtrQuota > 0 ? sourceSummary.total.firstQtrPipeline/sourceSummary.total.firstQtrQuota : 'NA' : 'NA')}}</td>
                                
                                <td class="number" >
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!secondQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: white">{{formatDecimal(sourceSummary.total.secondQtrPipeline, displayFormat) }}</a> 
                                
                                </td>
                                <td class="number" >{{formatDecimal(sourceSummary.total.secondQtrQuota, displayFormat) }}</td>
                                <td class="number"  style="text-align: center;">{{formatCoverage( sourceSummary.total.secondQtrPipeline > 0 ?  sourceSummary.total.secondQtrQuota > 0 ? sourceSummary.total.secondQtrPipeline/sourceSummary.total.secondQtrQuota : 'NA' : 'NA')}}</td>
                                
                                
                                <td class="number" >
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!thirdQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: white">{{formatDecimal(sourceSummary.total.thirdQtrPipeline, displayFormat)}}</a> 
                                
                                </td>
                                <td class="number" >{{formatDecimal(sourceSummary.total.thirdQtrQuota, displayFormat) }}</td>
                                <td class="number"  style="text-align: center;">{{formatCoverage( sourceSummary.total.thirdQtrPipeline > 0 ?  sourceSummary.total.thirdQtrQuota > 0 ? sourceSummary.total.thirdQtrPipeline/sourceSummary.total.thirdQtrQuota : 'NA' : 'NA')}}</td>
                                
                                <td class="number" >
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!fourthQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: white">{{formatDecimal(sourceSummary.total.fourthQtrPipeline, displayFormat) }}</a> 
                                
                                </td>
                                <td class="number" >{{formatDecimal(sourceSummary.total.fourthQtrQuota, displayFormat) }}</td>
                                <td class="number"  style="text-align: center;">{{formatCoverage( sourceSummary.total.fourthQtrPipeline > 0 ?  sourceSummary.total.fourthQtrQuota > 0 ? sourceSummary.total.fourthQtrPipeline/sourceSummary.total.fourthQtrQuota : 'NA' : 'NA')}}</td>
                                
                                <td class="number" >
                                <a href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={!firstQtr};{!secondQtr};{!thirdQtr};{!fourthQtr}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category=All&StartDate=&EndDate=&&Source=" target="_blank" style="text-decoration:none;color: white">{{formatDecimal(sourceSummary.total.firstQtrPipeline + sourceSummary.total.secondQtrPipeline + sourceSummary.total.thirdQtrPipeline + sourceSummary.total.fourthQtrPipeline , displayFormat) }}</a> 
                                
                                 </td>
                                
                                <td class="number" >{{formatDecimal(sourceSummary.total.firstQtrQuota + sourceSummary.total.secondQtrQuota + sourceSummary.total.thirdQtrQuota + sourceSummary.total.fourthQtrQuota , displayFormat) }}</td>
                                
                                <td class="number"  style="text-align: center;">{{formatCoverage( (sourceSummary.total.firstQtrPipeline + sourceSummary.total.secondQtrPipeline + sourceSummary.total.thirdQtrPipeline + sourceSummary.total.fourthQtrPipeline) > 0 ?(sourceSummary.total.firstQtrQuota + sourceSummary.total.secondQtrQuota + sourceSummary.total.thirdQtrQuota + sourceSummary.total.fourthQtrQuota) > 0 ? (sourceSummary.total.firstQtrPipeline + sourceSummary.total.secondQtrPipeline + sourceSummary.total.thirdQtrPipeline + sourceSummary.total.fourthQtrPipeline)/(sourceSummary.total.firstQtrQuota + sourceSummary.total.secondQtrQuota + sourceSummary.total.thirdQtrQuota + sourceSummary.total.fourthQtrQuota) : 'NA' : 'NA')}}</td>
                                
                             </tr>
                             
                             
                         </tbody>
                         
                    </table>
                    <br/>
                    
                     <table class="report">
                        <thead>
                            <tr class="header">
                                <th class="minW80" style="color: white;background-color: white;">&nbsp;</th>
                                <th class="minW80" colspan="6" style="color: white;background-color: black;">4Q Rolling WoW </th>
                             </tr>
                             
                            <tr class="header">
                                <th class="minW80" style="color: white;background-color: #37601C;">Source</th>
                                
                                <th class="minW80" style="color: white;background-color: #1F5069;">This Week</th>
                                
                                <th class="minW80" style="color: black;background-color: #92C4DE;">Last Week</th>
                                
                                <th class="minW80" style="color: white;background-color: #1F5069;">Prior Week</th>
                                
                             </tr> 
                        </thead>
                        <tbody>
                        <br/>
                        
                             <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" ng-repeat="src in fourQtrSourceSummary.data">
                                <td style="color: black;background-color: #A8DC85;">{{src.source}}</td>
                                
                                <td class="number" >{{formatDecimal(src.thisWeek, displayFormat)}}</td>
                                
                                <td class="number" >{{formatDecimal(src.lastWeek, displayFormat) }}</td>
                                
                                <td class="number" >{{formatDecimal(src.priorWeek, displayFormat) }}</td>
                                
                             </tr>
                             
                             <tr class="footer" style="background-color:black;">
                                <td>Total</td>
                                <td class="number">{{formatDecimal(fourQtrSourceSummary.total.thisWeek, displayFormat)}}</td>
                                <td class="number">{{formatDecimal(fourQtrSourceSummary.total.lastWeek, displayFormat)}}</td>
                                <td class="number">{{formatDecimal(fourQtrSourceSummary.total.priorWeek, displayFormat)}}</td>
                            </tr>
                             
                             
                         </tbody>
                         
                    </table>
                    
                    </apex:pageBlock>
                    
                    <br/>
                    <hr width="100%" size="2px" color="black"/>
                    <br/>
                    <label style="display: block;text-align: center;line-height: 15px;font-size: 15px;padding-right: 100Px;">
                        <span style="color:white; background: black;text-align: center;">&nbsp; Current Quarter &nbsp;</span>
                    </label><br/><br/>
                    <apex:pageBlock html-ng-show="teamForecasts.data.length > 0;dashboardType=='funnel'"  title="Funnel Distribution" helpTitle="Help" helpUrl="/servlet/servlet.ImageServer?id=0158A00000090s5&oid=00D8A0000008lXx&lastMod=1451374855000">
                    
                    
                    <span style="float:left">
                    <a  style="color: #0064FF;font-size: 18px;" href="{!$Page.PerformanceDashboard}?path={!$currentPage.parameters.path}&quarter={!CurrentFiscalQuarter.Previous.FormattedString}&type={{forecastType}}" title="Previous quarter"><span class="fa fa-angle-double-left"></span></a> &nbsp;
                    <span style="color: #D01515;font-size: 15px;font-weight: bold;">
                    {{funnelDistFiscalQtr}} &nbsp;
                    </span>
                    <a  style="color: #0064FF;font-size: 18px;" href="{!$Page.PerformanceDashboard}?path={!$currentPage.parameters.path}&quarter={!CurrentFiscalQuarter.Next.FormattedString}&type={{forecastType}}" title="Next quarter"><span class="fa fa-angle-double-right"></span></a></span>
                    
                    <apex:pageBlockSection columns="1" >
                    
                   <apex:outputPanel >
                        <table class="report">
                            <thead>
                                <tr class="header">
                                    <th class="minW80" style="background-color: black; color: white;">Category</th>
                                    <th   class="minW78" style="background-color: #1F4E78;color: white;">Week 1</th>
                                    <th   class="minW78" style="background-color: #D6DCE4; ">Week 2</th>
                                    <th   class="minW78" style="background-color: #1F4E78; color: white;">Week 3</th>
                                    <th   class="minW78" style="background-color: #D6DCE4; ">Week 4</th>
                                    <th   class="minW78" style="background-color: #1F4E78; color: white;">Week 5</th>
                                    <th   class="minW78" style="background-color: #D6DCE4; ">Week 6</th>
                                    <th   class="minW78" style="background-color: #1F4E78; color: white;">Week 7</th>
                                    <th   class="minW78" style="background-color: #D6DCE4; ">Week 8</th>
                                    <th   class="minW78" style="background-color: #1F4E78; color: white;">Week 9</th>
                                    <th   class="minW78" style="background-color: #D6DCE4; ">Week 10</th>
                                    <th   class="minW78" style="background-color: #1F4E78; color: white;">Week 11</th>
                                    <th   class="minW78" style="background-color: #D6DCE4; ">Week 12</th>
                                    <th   class="minW78" style="background-color: #1F4E78; color: white;">Week 13</th>
                                    <th   class="minW78" style="background-color: black; color: white;">Total</th>
                                 </tr>
                                 
                                 
                            </thead>
                            <tbody>
                                 <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" ng-repeat="funnelDist in funnelDistWOW.data">
                                    <td ng-hide="funnelDist.isPercentage" class="minW80">{{funnelDist.oppStage}}</td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week1StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week1StartDate}}&EndDate={{funnelDist.week1EndDate}}&&Source=" target="_blank" style="text-decoration:none; color: #A20000">{{formatDecimal(funnelDist.week1, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week1StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week1StartDate}}&EndDate={{funnelDist.week1EndDate}}&&Source=" target="_blank" style="text-decoration:none; color: #0F2539">{{formatDecimal(funnelDist.week1, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage " class="number"> 
                                        <a ng-show = "funnelDist.week2StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week2StartDate}}&EndDate={{funnelDist.week2EndDate}}&&Source=" target="_blank" style="text-decoration:none;color:  #A20000">{{formatDecimal(funnelDist.week2, displayFormat) }}</a> 
                                        
                                        <a ng-show = "funnelDist.week2StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week2StartDate}}&EndDate={{funnelDist.week2EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week2, displayFormat) }}</a> 
                                    </td>
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week3StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week3StartDate}}&EndDate={{funnelDist.week3EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week3, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week3StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week3StartDate}}&EndDate={{funnelDist.week3EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week3, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week4StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week4StartDate}}&EndDate={{funnelDist.week4EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week4, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week4StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week4StartDate}}&EndDate={{funnelDist.week4EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week4, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week5StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week5StartDate}}&EndDate={{funnelDist.week5EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week5, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week5StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week5StartDate}}&EndDate={{funnelDist.week5EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week5, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week6StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week6StartDate}}&EndDate={{funnelDist.week6EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week6, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week6StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week6StartDate}}&EndDate={{funnelDist.week6EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week6, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week7StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week7StartDate}}&EndDate={{funnelDist.week7EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week7, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week7StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week7StartDate}}&EndDate={{funnelDist.week7EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week7, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week8StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week8StartDate}}&EndDate={{funnelDist.week8EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week8, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week8StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week8StartDate}}&EndDate={{funnelDist.week8EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week8, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week9StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week9StartDate}}&EndDate={{funnelDist.week9EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week9, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week9StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week9StartDate}}&EndDate={{funnelDist.week9EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week9, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week10StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week10StartDate}}&EndDate={{funnelDist.week10EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week10, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week10StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week10StartDate}}&EndDate={{funnelDist.week10EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week10, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week11StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week11StartDate}}&EndDate={{funnelDist.week11EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week11, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week11StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week11StartDate}}&EndDate={{funnelDist.week11EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week11, displayFormat) }}</a> 
                                    </td>
                                    
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week12StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week12StartDate}}&EndDate={{funnelDist.week12EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week12, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week12StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week12StartDate}}&EndDate={{funnelDist.week12EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week12, displayFormat) }}</a> 
                                    </td>
                                    <td ng-hide="funnelDist.isPercentage" class="number"> 
                                        <a ng-show = "funnelDist.week13StartDate == funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week13StartDate}}&EndDate={{funnelDist.week13EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #A20000">{{formatDecimal(funnelDist.week13, displayFormat) }}</a> 
                                        <a ng-show = "funnelDist.week13StartDate != funnelDist.currentWeekStartDate" href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week13StartDate}}&EndDate={{funnelDist.week13EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.week13, displayFormat) }}</a> 
                                    </td>
                                    <td ng-hide="funnelDist.isPercentage" class="number">
                                        
                                        <a  href="{!$Page.PerformanceOpportunityReport}?FiscalQtr={{funnelDistFiscalQtr}}&UsrId={{currentUser}}&ForecastType={{forecastType}}&Category={{funnelDist.oppStage}}&StartDate={{funnelDist.week1StartDate}}&EndDate={{funnelDist.week13EndDate}}&&Source=" target="_blank" style="text-decoration:none;color: #0F2539">{{formatDecimal(funnelDist.totalAmount, displayFormat)}}</a>
                                    
                                    </td>
                                    
                                    
                                    <td ng-show="funnelDist.isPercentage" class="minW80"><b>{{funnelDist.oppStage}}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week1 > 0 ? funnelDist.week1 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week2 > 0 ? funnelDist.week2 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week3 > 0 ? funnelDist.week3 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week4 > 0 ? funnelDist.week4 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week5 > 0 ? funnelDist.week5 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week6 > 0 ? funnelDist.week6 : 'NA') }}</b></td>
                                    
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week7 > 0 ? funnelDist.week7 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week8 > 0 ? funnelDist.week8 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week9 > 0 ? funnelDist.week9 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week10 > 0 ? funnelDist.week10 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week11 > 0 ? funnelDist.week11 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week12 > 0 ? funnelDist.week12 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.week13 > 0 ? funnelDist.week13 : 'NA') }}</b></td>
                                    <td ng-show="funnelDist.isPercentage" class="number"><b>{{formatPercentage(funnelDist.totalAmount > 0 ? funnelDist.totalAmount : 'NA') }}</b></td>
                                    
                                 </tr>
                             </tbody>
                        </table>

                    </apex:outputPanel>
                           
                    <br/>    
                    </apex:pageBlockSection>
                    </apex:pageBlock>
                    
                    <apex:pageBlock title="Quarter to Date : Week over Week Movement" helpTitle="Help" helpUrl="/servlet/servlet.ImageServer?id=0158A00000090sA&oid=00D8A0000008lXx&lastMod=1451374884000">
                    <apex:pageBlockSection columns="1" >
                    <apex:outputPanel >
                    
                        <table class="report">
                        <thead>
                            <tr class="header">
                                <th class="minW75" style="color: white;background-color: white;">&nbsp;</th>
                                <th  colspan="4" class="minW75" style="color: white;background-color: #0C0C61;">Closed Won</th>
                                <th  colspan="4" class="minW75" style="color: white;background-color: #2F75B5;"> Commit </th>
                                <th  colspan="4" class="minW75" style="color: white;background-color: #0C0C61;">Upside</th>
                             </tr>
                             
                            <tr class="header">
                                <th class="minW75" style="color: white;background-color: black">Source</th>
                                
                                <th class="minW75" style="color: white;background-color: #135A05">QTR Total</th>
                                <th class="minW75" style="color: white;background-color: #135A05">% Contribution</th>
                                <th class="minW75" style="color: black;background-color: #BFBFBF">Last Week</th>
                                <th class="minW75" style="color: black;background-color: #BFBFBF">% Contribution</th>
                                
                                <th class="minW75" style="color: white;background-color: #135A05">QTR Total</th>
                                <th class="minW75" style="color: white;background-color: #135A05">% Contribution</th>
                                <th class="minW75" style="color: black;background-color: #BFBFBF">Last Week</th>
                                <th class="minW75" style="color: black;background-color: #BFBFBF">% Contribution</th>
                                
                                <th class="minW75" style="color: white;background-color: #135A05">QTR Total</th>
                                <th class="minW75" style="color: white;background-color: #135A05">% Contribution</th>
                                <th class="minW75" style="color: black;background-color: #BFBFBF">Last Week</th>
                                <th class="minW75" style="color: black;background-color: #BFBFBF">% Contribution</th>
                                
                                
                                
                             </tr> 
                        </thead>
                        <tbody>
                             <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" ng-repeat="sourceData in sourceFunnel.data">
                                <td style="color: black;background-color: #BFBFBF">{{sourceData.source}}</td>
                                
                                <td class="number">{{formatDecimal(sourceData.closedwonQTD, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceData.totalClosedWon > 0 ? (sourceData.closedwonQTD/sourceData.totalClosedWon)*100 : 'NA') }}</td>
                                <td class="number">{{formatDecimal(sourceData.closedwonWOW, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceData.totalClosedWonWOW > 0 ? (sourceData.closedwonWOW/sourceData.totalClosedWonWOW)*100 : 'NA') }}</td>
                                
                                <td class="number">{{formatDecimal(sourceData.commitQTD, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceData.totalCommit > 0 ? (sourceData.commitQTD/sourceData.totalCommit)*100 : 'NA') }}</td>
                                <td class="number">{{formatDecimal(sourceData.commitWOW, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceData.totalCommitWOW > 0 ? (sourceData.commitWOW/sourceData.totalCommitWOW)*100 : 'NA') }}</td>
                                
                                <td class="number">{{formatDecimal(sourceData.upsideQTD, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceData.totalUpside > 0 ? (sourceData.upsideQTD/sourceData.totalUpside)*100 : 'NA') }}</td>
                                <td class="number">{{formatDecimal(sourceData.upsideWOW, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceData.totalUpsideWOW > 0 ? (sourceData.upsideWOW/sourceData.totalUpsideWOW)*100 : 'NA') }}</td>
                             </tr>
                             
                             
                             <tr class="footer" style="background-color:black;">
                                <td >Total</td>
                                
                                <td class="number">{{formatDecimal(sourceFunnel.total.closedwonQTD, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceFunnel.total.totalClosedWon > 0 ? 100 : 'NA') }}</td>
                                <td class="number">{{formatDecimal(sourceFunnel.total.closedwonWOW, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceFunnel.total.totalClosedWonWOW > 0 ? 100 : 'NA') }}</td>
                                
                                <td class="number">{{formatDecimal(sourceFunnel.total.commitQTD, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceFunnel.total.totalCommit > 0 ? 100 : 'NA') }}</td>
                                <td class="number">{{formatDecimal(sourceFunnel.total.commitWOW, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceFunnel.total.totalCommitWOW > 0 ? 100 : 'NA') }}</td>
                                
                                <td class="number">{{formatDecimal(sourceFunnel.total.upsideQTD, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceFunnel.total.totalUpside > 0 ? 100 : 'NA') }}</td>
                                <td class="number">{{formatDecimal(sourceFunnel.total.upsideWOW, displayFormat) }}</td>
                                <td class="number">{{formatPercentage(sourceFunnel.total.totalUpsideWOW > 0 ? 100 : 'NA') }}</td>
                             </tr>
                             

                             
                             
                         </tbody>
                    </table>
                    
                    </apex:outputPanel>
                    
                    
                    
                    
                    <apex:outputPanel >
                    <table class="report">
                        <thead>
                            <tr class="header">
                                <th class="minW80" style="color: white;background-color: white;"></th>
                                <th  colspan="3" class="minW80" style="color: white;background-color: #0C0C61;">Movement</th>
                            <!--    <th   class="minW80" style="color: white;background-color: #135A05;">QTR Total</th> -->
                            </tr>
                             
                            <tr class="header">
                                <th class="minW80" style="color: white;background-color: black;">Category</th>
                                
                                <th class="minW80" style="color: white;background-color: #2323A2;">This Week</th>
                                <th class="minW80" style="color: white;background-color: #2323A2;">Last Week</th>
                                <th class="minW80" style="color: white;background-color: #2323A2;">Prior Week</th>
                                
                               <!--  <th class="minW80" style="color: white;background-color: #21920B;">$Amount</th>-->
                                
                             </tr> 
                        </thead>
                        <tbody>
                            
                             <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" ng-repeat="WOWChange in funnelChangeWOW.data">
                                <td style="color: black;background-color: #BFBFBF;">{{WOWChange.Stage}}</td>
                                
                                <td class="number">{{formatDecimal(WOWChange.thisWeek, displayFormat) }}</td>
                                <td class="number">{{formatDecimal(WOWChange.lastWeek, displayFormat) }}</td>
                                
                                <td class="number">{{formatDecimal(WOWChange.priorWeek, displayFormat) }}</td>
                            <!--     <td class="number">{{formatDecimal(WOWChange.QTD, displayFormat) }}</td>-->
                                
                                
                             </tr>
                         </tbody>
                    </table>
                    </apex:outputPanel>
                    </apex:pageBlockSection>
                    <br/>
                    </apex:pageBlock>
                    <apex:pageBlock title="Funnel Vs. Achievement"   helpTitle="Help" helpUrl="/servlet/servlet.ImageServer?id=0158A00000090s0&oid=00D8A0000008lXx&lastMod=1451374829000">
                    <apex:pageBlockSection columns="1" >
                            <apex:outputPanel >

                            <table class="report">
                            <thead>
                                <tr class="header">
                                    <th class="minW80" style="background-color:black; color:white;">Team</th>
                                    <th   class="minW80" style="background-color:#375623; color:white;">Total Funnel</th>
                                    <th   class="minW80" style="background-color:#E2EFDA; color: balck;">Closed Won</th>
                                    <th   class="minW80" style="background-color:#375623; color:white;">Quota</th>
                                    <th   class="minW80" style="background-color:#E2EFDA; color:black;">% Quota</th>
                                 </tr>
                            </thead>
                            <tbody>
                                 <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" ng-repeat="forecast in teamFunnelAch.data">
                                    <td ng-show="forecast.UserId != currentUser">{{forecast.UserName}}</td>
                                
                                    <td class="number" ng-show="forecast.UserId != currentUser">{{formatDecimal(forecast.totalAmount, displayFormat) }}</td>
                                    <td class="number" ng-show="forecast.UserId != currentUser">{{formatDecimal(forecast.firstQtrClosedWon, displayFormat) }}</td>
                                    <td class="number" ng-show="forecast.UserId != currentUser">{{formatDecimal(forecast.firstQtrQuota, displayFormat) }}</td>
                                    <td class="number" ng-show="forecast.UserId != currentUser" style="text-align: center;">{{formatPercentage(forecast.quotaPercentage > 0 ? forecast.quotaPercentage : 'NA') }}</td>
                                 </tr>
                                 
                                 <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" >
                                    <td><b>{{teamFunnelAch.total.UserName}}</b></td>
                                
                                    <td class="number"><b>{{formatDecimal(teamFunnelAch.total.totalAmount, displayFormat) }}</b></td>
                                    <td class="number"><b>{{formatDecimal(teamFunnelAch.total.firstQtrClosedWon, displayFormat) }}</b></td>
                                    <td class="number"><b>{{formatDecimal(teamFunnelAch.total.firstQtrQuota, displayFormat) }}</b></td>
                                    <td class="number" style="text-align: center;"><b>{{formatPercentage(teamFunnelAch.total.quotaPercentage >0 ? teamFunnelAch.total.quotaPercentage : 'NA') }}</b></td>
                                 </tr>
                             </tbody>
                        </table>
                        </apex:outputPanel>
                
                    <br/>    
                        
                    </apex:pageBlockSection>
                    
                </apex:pageBlock>
                
                
                <apex:pageBlock id="teamListingBlock2"  html-ng-show="teamForecasts.data.length > 0;dashboardType=='performance'">
                    <table class="report">
                        <thead>
                            <tr class="header">
                                <th class="minW80">&nbsp;</th>
                                <th class="minW80" colspan="3">{!firstQtr}</th>
                                <th class="minW80" colspan="3">{!secondQtr}</th>
                                <th class="minW80" colspan="3">{!thirdQtr}</th>
                                <th class="minW80" colspan="3">{!fourthQtr}</th>
                             </tr>
                             
                            <tr class="header">
                                <th class="minW80">Team</th>
                                
                                <th class="minW80">Closed Won</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">% Quota</th>
                                
                                <th class="minW80">Closed Won</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">% Quota</th>
                                
                                <th class="minW80">Closed Won</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">% Quota</th>
                                
                                <th class="minW80">Closed Won</th>
                                <th class="minW80">Quota</th>
                                <th class="minW80">% Quota</th>
                             </tr> 
                        </thead>
                        <tbody>
                            
                             <tr ng-class="{'line': !($index % 2), 'line2': !!($index % 2) }" ng-repeat="forecast in teamForecasts.data">
                                <td><a href="{!$Page.PerformanceDashboard}?path={!UserPath}/{{forecast.UserId}}&type={{dasboardType}}">{{forecast.UserName}}</a></td>
                                
                                <td>{{forecast.firstQtrClosedWon }}</td>
                                <td>{{forecast.firstQtrQuota }}</td>
                                <td>{{forecast.firstQtrQuotaPercnt }}</td>
                                
                                <td>{{forecast.secondQtrClosedWon }}</td>
                                <td>{{forecast.secondQtrQuota }}</td>
                                <td>{{forecast.secondQtrQuotaPercnt }}</td>
                                
                                
                                <td>{{forecast.thirdQtrClosedWon }}</td>
                                <td>{{forecast.thirdQtrQuota }}</td>
                                <td>{{forecast.thirdQtrQuotaPercnt }}</td>
                                
                                <td>{{forecast.fourthQtrClosedWon }}</td>
                                <td>{{forecast.fourthQtrQuota }}</td>
                                <td>{{forecast.fourthQtrQuotaPercnt }}</td>
                                
                             </tr>
                         </tbody>
                    </table>
                </apex:pageBlock>
                
            </div>
        </apex:form>

    </apex:page>